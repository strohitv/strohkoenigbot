{
  "databaseChangeLog": [
    {
      "changeSet": {
        "id": "1",
        "author": "strohkoenig",
        "changes": [
          {
            "createTable": {
              "tableName": "configuration",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "config_name",
                    "type": "varchar(50)"
                  }
                },
                {
                  "column": {
                    "name": "config_value",
                    "type": "varchar(5000)"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "splatoon_login",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "nickname",
                    "type": "varchar(50)"
                  }
                },
                {
                  "column": {
                    "name": "cookie",
                    "type": "varchar(500)"
                  }
                },
                {
                  "column": {
                    "name": "expires_at",
                    "type": "timestamp"
                  }
                },
                {
                  "column": {
                    "name": "session_token",
                    "type": "varchar(500)"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "twitch_auth",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "token",
                    "type": "varchar(40)"
                  }
                },
                {
                  "column": {
                    "name": "channel_id",
                    "type": "varchar(30)"
                  }
                },
                {
                  "column": {
                    "name": "username",
                    "type": "varchar(30)"
                  }
                },
                {
                  "column": {
                    "name": "is_main",
                    "type": "boolean"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "ability_notification",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "user_id",
                    "type": "varchar(40)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "gear",
                    "type": "varchar(40)"
                  }
                },
                {
                  "column": {
                    "name": "main",
                    "type": "varchar(40)"
                  }
                },
                {
                  "column": {
                    "name": "favored",
                    "type": "varchar(40)"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "discord_account",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "twitch_user_id",
                    "type": "varchar(40)",
                    "constraints": {
                      "nullable": false,
                      "unique": true
                    }
                  }
                },
                {
                  "column": {
                    "name": "discord_id",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "consent",
                    "type": "boolean"
                  }
                }
              ]
            }
          },
          {
            "addForeignKeyConstraint": {
              "baseColumnNames": "user_id",
              "baseTableName": "ability_notification",
              "constraintName": "fk_twitch_user_id",
              "onDelete": "CASCADE",
              "onUpdate": "RESTRICT",
              "referencedColumnNames": "twitch_user_id",
              "referencedTableName": "discord_account",
              "validate": true
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "2",
        "author": "strohkoenig",
        "changes": [
          {
            "dropForeignKeyConstraint": {
              "baseTableName": "ability_notification",
              "constraintName": "fk_twitch_user_id"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "discord_id",
                    "position": 2,
                    "type": "bigint"
                  }
                }
              ],
              "tableName": "ability_notification"
            }
          },
          {
            "update": {
              "columns": [
                {
                  "column": {
                    "name": "discord_id",
                    "valueComputed": "(SELECT dc.id FROM DBO.discord_account dc WHERE dc.twitch_user_id = user_id)"
                  }
                }
              ],
              "tableName": "ability_notification"
            }
          },
          {
            "delete": {
              "tableName": "ability_notification",
              "where": "discord_id IS NULL"
            }
          },
          {
            "dropColumn": {
              "columnName": "user_id",
              "tableName": "ability_notification"
            }
          },
          {
            "addForeignKeyConstraint": {
              "baseColumnNames": "discord_id",
              "baseTableName": "ability_notification",
              "constraintName": "fk_discord_id",
              "onDelete": "CASCADE",
              "onUpdate": "RESTRICT",
              "referencedColumnNames": "id",
              "referencedTableName": "discord_account",
              "validate": true
            }
          },
          {
            "dropNotNullConstraint": {
              "columnDataType": "varchar(40)",
              "columnName": "twitch_user_id",
              "tableName": "discord_account"
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "3",
        "author": "strohkoenig",
        "changes": [
          {
            "createTable": {
              "tableName": "splatoon_stage",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "splatoon_api_id",
                    "type": "varchar(10)"
                  }
                },
                {
                  "column": {
                    "name": "name",
                    "type": "varchar(50)"
                  }
                },
                {
                  "column": {
                    "name": "image",
                    "type": "varchar(80)"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "splatoon_rotation",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "splatoon_api_id",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "start_time",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "end_time",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "stage_a_id",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "stage_b_id",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "mode",
                    "type": "varchar(30)"
                  }
                },
                {
                  "column": {
                    "name": "rule",
                    "type": "varchar(30)"
                  }
                }
              ]
            }
          },
          {
            "addForeignKeyConstraint": {
              "baseColumnNames": "stage_a_id",
              "baseTableName": "splatoon_rotation",
              "constraintName": "fk_splatoon_rotation_stage_a_id",
              "onDelete": "RESTRICT",
              "onUpdate": "RESTRICT",
              "referencedColumnNames": "id",
              "referencedTableName": "splatoon_stage",
              "validate": true
            }
          },
          {
            "addForeignKeyConstraint": {
              "baseColumnNames": "stage_b_id",
              "baseTableName": "splatoon_rotation",
              "constraintName": "fk_splatoon_rotation_stage_b_id",
              "onDelete": "RESTRICT",
              "onUpdate": "RESTRICT",
              "referencedColumnNames": "id",
              "referencedTableName": "splatoon_stage",
              "validate": true
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "4",
        "author": "strohkoenig",
        "changes": [
          {
            "createTable": {
              "tableName": "splatoon_weapon",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "splatoon_api_id",
                    "type": "varchar(10)"
                  }
                },
                {
                  "column": {
                    "name": "name",
                    "type": "varchar(50)"
                  }
                },
                {
                  "column": {
                    "name": "image",
                    "type": "varchar(80)"
                  }
                },
                {
                  "column": {
                    "name": "sub_splatoon_api_id",
                    "type": "varchar(10)"
                  }
                },
                {
                  "column": {
                    "name": "sub_name",
                    "type": "varchar(20)"
                  }
                },
                {
                  "column": {
                    "name": "sub_image",
                    "type": "varchar(80)"
                  }
                },
                {
                  "column": {
                    "name": "special_splatoon_api_id",
                    "type": "varchar(10)"
                  }
                },
                {
                  "column": {
                    "name": "special_name",
                    "type": "varchar(40)"
                  }
                },
                {
                  "column": {
                    "name": "special_image",
                    "type": "varchar(80)"
                  }
                },
                {
                  "column": {
                    "name": "turf",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "wins",
                    "type": "int"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "splatoon_monthly_result",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "period_year",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "period_month",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "start_time",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "end_time",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "zones_current",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "zones_peak",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "zones_weapon_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_zones_monthly_weapon_id",
                      "references": "splatoon_weapon(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "rainmaker_current",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "rainmaker_peak",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "rainmaker_weapon_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_rainmaker_monthly_weapon_id",
                      "references": "splatoon_weapon(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "tower_current",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "tower_peak",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "tower_weapon_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_tower_monthly_weapon_id",
                      "references": "splatoon_weapon(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "clams_current",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "clams_peak",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "clams_weapon_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_clams_monthly_weapon_id",
                      "references": "splatoon_weapon(id)"
                    }
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "5",
        "author": "strohkoenig",
        "changes": [
          {
            "createTable": {
              "tableName": "splatoon_gear",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "splatoon_api_id",
                    "type": "varchar(10)"
                  }
                },
                {
                  "column": {
                    "name": "kind",
                    "type": "varchar(15)"
                  }
                },
                {
                  "column": {
                    "name": "name",
                    "type": "varchar(40)"
                  }
                },
                {
                  "column": {
                    "name": "image",
                    "type": "varchar(80)"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "splatoon_ability",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "splatoon_api_id",
                    "type": "varchar(10)"
                  }
                },
                {
                  "column": {
                    "name": "name",
                    "type": "varchar(40)"
                  }
                },
                {
                  "column": {
                    "name": "image",
                    "type": "varchar(80)"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "splatoon_match",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "battle_number",
                    "type": "varchar(6)"
                  }
                },
                {
                  "column": {
                    "name": "start_time",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "elapsed_time",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "end_time",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "rotation_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_match_rotation_id",
                      "references": "splatoon_rotation(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "stage_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": false,
                      "foreignKeyName": "fk_match_stage_id",
                      "references": "splatoon_stage(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "mode",
                    "type": "varchar(30)"
                  }
                },
                {
                  "column": {
                    "name": "rule",
                    "type": "varchar(30)"
                  }
                },
                {
                  "column": {
                    "name": "rank",
                    "type": "varchar(3)"
                  }
                },
                {
                  "column": {
                    "name": "x_power",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "x_power_estimate",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "x_lobby_power",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "league_tag",
                    "type": "varchar(20)"
                  }
                },
                {
                  "column": {
                    "name": "league_power",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "league_power_max",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "league_power_estimate",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "league_enemy_power",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "weapon_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_match_weapon_id",
                      "references": "splatoon_weapon(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "turf_gain",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "turf_total",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "kills",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "assist",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "deaths",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "specials",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "own_score",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "own_percentage",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "enemy_score",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "enemy_percentage",
                    "type": "double"
                  }
                },
                {
                  "column": {
                    "name": "match_result",
                    "type": "varchar(10)"
                  }
                },
                {
                  "column": {
                    "name": "is_ko",
                    "type": "boolean"
                  }
                },
                {
                  "column": {
                    "name": "headgear_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_match_headgear_id",
                      "references": "splatoon_gear(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "clothes_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_match_clothes_id",
                      "references": "splatoon_gear(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "shoes_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_match_shoes_id",
                      "references": "splatoon_gear(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "json_overview",
                    "type": "clob(15000)"
                  }
                },
                {
                  "column": {
                    "name": "json_match",
                    "type": "clob(100000)"
                  }
                }
              ]
            }
          },
          {
            "createTable": {
              "tableName": "splatoon_ability_match",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "ability_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_ability_match_ability_id",
                      "references": "splatoon_ability(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "match_id",
                    "type": "bigint",
                    "constraints": {
                      "nullable": true,
                      "foreignKeyName": "fk_ability_match_match_id",
                      "references": "splatoon_match(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "kind",
                    "type": "varchar(15)"
                  }
                },
                {
                  "column": {
                    "name": "gear_position",
                    "type": "int"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "6",
        "author": "strohkoenig",
        "changes": [
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "defeats",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_weapon"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "zones_wins",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "zones_defeats",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "rainmaker_wins",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "rainmaker_defeats",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "tower_wins",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "tower_defeats",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "clams_wins",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          },
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "clams_defeats",
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_stage"
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "7",
        "author": "strohkoenig",
        "changes": [
          {
            "createTable": {
              "tableName": "splatoon_clips",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "start_time",
                    "type": "timestamp"
                  }
                },
                {
                  "column": {
                    "name": "end_time",
                    "type": "timestamp"
                  }
                },
                {
                  "column": {
                    "name": "is_good_play",
                    "type": "boolean"
                  }
                },
                {
                  "column": {
                    "name": "clip_url",
                    "type": "varchar(150)"
                  }
                },
                {
                  "column": {
                    "name": "description",
                    "type": "varchar(500)"
                  }
                },
                {
                  "column": {
                    "name": "match_id",
                    "type": "bigint"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "8",
        "author": "strohkoenig",
        "changes": [
          {
            "columns": [
              {
                "column": {
                  "name": "main",
                  "value": "Last-Ditch Effort"
                }
              }
            ],
            "tableName": "ability_notification",
            "where": "main='Last Ditch Effort'"
          },
          {
            "columns": [
              {
                "column": {
                  "name": "main",
                  "value": "Bomb Defense Up DX"
                }
              }
            ],
            "tableName": "ability_notification",
            "where": "main='Bomb Defense Up Dx'"
          },
          {
            "columns": [
              {
                "column": {
                  "name": "favored",
                  "value": "Bomb Defense Up DX"
                }
              }
            ],
            "tableName": "ability_notification",
            "where": "favored='Bomb Defense Up Dx'"
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "9",
        "author": "strohkoenig",
        "changes": [
          {
            "addColumn": {
              "columns": [
                {
                  "column": {
                    "name": "splatnet_battle_number",
                    "position": 2,
                    "type": "int"
                  }
                }
              ],
              "tableName": "splatoon_match"
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "10",
        "author": "strohkoenig",
        "changes": [
          {
            "createIndex": {
              "clustered": true,
              "columns": [
                {
                  "column": {
                    "descending": true,
                    "name": "battle_number"
                  }
                }
              ],
              "indexName": "splatnet_battle_number",
              "tableName": "splatoon_match",
              "unique": true
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "11",
        "author": "strohkoenig",
        "changes": [
          {
            "createIndex": {
              "clustered": false,
              "columns": [
                {
                  "column": {
                    "descending": true,
                    "name": "battle_number"
                  }
                }
              ],
              "indexName": "splatnet_battle_number",
              "tableName": "splatoon_match",
              "unique": true
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "12",
        "author": "strohkoenig",
        "changes": [
          {
            "createTable": {
              "tableName": "twitch_so_account",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "username",
                    "type": "varchar(150)"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "13",
        "author": "strohkoenig",
        "changes": [
          {
            "dropColumn": {
              "tableName": "splatoon_login",
              "columns": [
                {
                  "column": {
                    "name": "nickname"
                  }
                },
                {
                  "column": {
                    "name": "session_token"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "14",
        "author": "strohkoenig",
        "changes": [
          {
            "createTable": {
              "tableName": "splatoon_weapon_request_ranking",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "bigint",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "twitch_id",
                    "type": "varchar(150)"
                  }
                },
                {
                  "column": {
                    "name": "twitch_name",
                    "type": "varchar(150)"
                  }
                },
                {
                  "column": {
                    "name": "win_streak",
                    "type": "int"
                  }
                },
                {
                  "column": {
                    "name": "weapon_id",
                    "type": "bigint"
                  }
                },
                {
                  "column": {
                    "name": "challenged_at",
                    "type": "timestamp"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "15",
        "author": "strohkoenig",
        "changes": [
          {
            "delete": {
              "tableName": "twitch_auth",
              "where": "is_main='true'"
            }
          },
          {
            "dropColumn": {
              "tableName": "twitch_auth",
              "columns": [
                {
                  "column": {
                    "name": "channel_id"
                  }
                },
                {
                  "column": {
                    "name": "username"
                  }
                },
                {
                  "column": {
                    "name": "is_main"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}
